---
title: "Titanic Project"
author: "Clement Mugenzi"
date: "9/20/2019"
output: github_document
---

```{r setup, include=F}
library(tidyverse)
library(ggthemes)
library(scales)
library(mice)
library(randomForest)
library(viridis)
library(readxl)
library(readr)
library(patchwork)
knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
theme_set(theme_minimal() + theme(legend.position = "bottom"))
```



# Introduction

This titanic project is based on the infamous sinking of Titanic in 1912, a tragedy that led to 1,502 people dying out of 2,224 passengers. Datasets provided include the train dataset with 891 passengers whose survival fate is known and a test dataset with 418 passengers whose survival fate is unknown. I will first start by loading both datasets then combine them to do some feature engineering (data cleaning and data manipulation).

## Loading the Dataset

```{r, results='asis', include=T}
# First, we will load the train dataset.
train = 
  read_csv("Data/train.csv") %>% 
  janitor::clean_names() 
# Second, the test dataset is loaded
test = 
  read_csv("Data/test.csv") %>% 
  janitor::clean_names()
# Then both the train and test datasets are combined into a single dataset.
Titanic = 
  bind_rows(train, test) %>% 
  rename(gender = "sex") %>% view()
```

After loading and combining both datasets, it is better to highlight what kind of dataset I will be working with. A glimpse of the dataset is in the next code chunk.

```{r}
glimpse(Titanic)
```

Some of the variables important to highlight include name, passengerID, gender, age, and each individual's survival status. 

## Summary of missing values 

The code chunk below summarises how many missing values we have per column.

```{r}
  Titanic %>%
    gather(key = "key", value = "val") %>%
    mutate(is.missing = is.na(val)) %>%
    group_by(key, is.missing) %>%
    summarise(num.missing = n()) %>%
    filter(is.missing == T) %>%
    select(-is.missing) %>%
    arrange(desc(num.missing)) %>%
    rename("Missing Values" = "num.missing", "Variable" = "key") %>% 
  knitr::kable()
```


This is a dirty dataset and we either need to drop the rows with NaN values or fill in the gaps by leveraging the data in the dataset to estimate what those values could have been. We will choose the latter and try to estimate those values and fill in the gaps rather than lose observations.

## Cleaning Names

With the following code chunk, I will extract the name title such as "Mr." or "Miss." everywhere such titles occurs within the name variable.

```{r}
Titanic %>%
  mutate(
    name = str_replace(name, "Mr.", ""),
    name = str_replace(name, "Mrs.", ""),
    name = str_replace(name, "Miss", ""),
    name = str_replace(name, "miss", ""),
    name = str_replace(name, "Master", ""),
    name = str_replace(name, ",.", ","),
    name = str_replace(name, ".,", "")) %>% view()
```




































